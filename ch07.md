# 第 7 章 實戰範例：YouTube 影片英文聽打練習

## 7-1 設計應用程式功能與架構

### 設定最初的專案規則

- 輸入的內容：

```md
- 使用 uv 管理 Python 環境
- 如果專案尚未建立虛擬環境, 請使用 uv init 初始化環境
- 如果要執行 python 程式,使用 uv run 執行
- 使用 docstring 並以**繁體中文**紀錄函數、類別說明
```

### 與 Cursor 討論專案架構

- 輸入的提示內容：

```md
我希望開發一個專注於英文聽力與拼寫訓練的 Web 應用程式，透過 YouTube 影片進行互動式聽打練習，幫助學習者提升英語聽力與拼寫能力。主要功能如下：

1. YouTube 影片管理
- 支援透過 YouTube URL 下載影片和字幕
- 取得標題、頻道、時長、縮圖等影片資訊

2. 字幕處理與影片分段
- 支援 SRT 英文字幕檔案
- 需將字幕翻譯成繁體中文
- 根據字幕將影片進行分段

3. 影片播放
- 點擊分段可自動跳轉到對應時間點
- 播放速度調整（0.5× ~ 2.0×） 
- (按鈕) 循環撥放模式：單句重複播放（暫停 2 秒後重播）
- (按鈕) 單次撥放模式：單句僅播放一次

4. 聽打練習與填空
- 挖空每段影片的字幕，每個字母用底線 _ 呈現（如：I love flag ⮕ _  _ _ _ _  _ _ _ _）
- 標點符號不需挖空
- 輸入字母後自動跳到下一個空格
- (按鈕) 檢查答案：填空區域的下方會顯示正確答案，並與填空句子對齊
- (按鈕) 提示功能：按一下顯示下一個要輸入的字母
- (按鈕) 翻譯功能：呈現繁體中文翻譯

請先思考，列出開發此應用的主要步驟、UI 設計以及所使用的程式框架，與我討論。
```

- 供 Agent 參考 UI 設計：

```md
@UI參考圖
練習區的 UI 設計請參考此圖
```
- 所提供的圖片：

![所提供的圖片](images\7-1UI參考圖.png)


## 7-2 實作應用程式主功能

### 首次執行並除錯

- 執行應用程式時，請參考 Agents 實作所建立的 README.md

- 輸入的提示內容：

```md
@Terminals 啟動後端時發生錯誤
```

## 7-3 應用程式測試與優化

### 使用 Browser 進行測試

- 輸入的提示內容：

```md
使用 @Browser 開啟應用程式，透過以下影片來測試各項功能
[YouTube 影片網址]
```
### 優化應用程式

- 詢問 Agent：

```md
進行聽打練習時，會有斷句錯誤的狀況，且字幕分段列表的時間軸有時會重疊，幫我檢查原因
```

- 提供修正方向：

```md
yt-dlp 可以下載 VTT 檔，請下載 [YouTube 影片網址] 的字幕，看能不能從根本上解決問題 
```

```md
不對， SRT 並不正確，對於自動產生的字幕，它的時間軸會重疊且不準確 (這會影響影片分割)。就算你合併了，可能會導致影片聲音和字幕對不上，而 VTT 帶有更細緻的時間戳
```

## 7-4 完善其他功能

### 加入歷史紀錄的管理分類功能

- 輸入的提示內容：

```md
請加入歷史紀錄管理功能，可以對已處理影片進行資料夾分類。同時設計可展開的側邊欄，顯示影片紀錄清單
```

### 加入 AI 解說功能

```md
我希望加入 AI 解說的學習輔助功能 (顯示中文按鈕下方)，使用者可以在設定頁面中輸入 API Key，串接 GPT、Gemini 或本地的 Ollama 模型來對句子進行解說，包括常用句型、關鍵單字…等。請先上網搜尋各家 AI 廠商所提供的模型和串接方式
```

## 7-5 使用視覺編輯器調整 UI 介面

### 選取元件下達指令

```md
請將 [@UI 元件] 標題加入 YouTube 的超連結 
```

## 英文聽打專案範例網址

- [https://github.com/FlagTech/Youtube_ListenFill](https://github.com/FlagTech/Youtube_ListenFill)
