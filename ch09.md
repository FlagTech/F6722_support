# 第 9 章 實戰範例：音樂節奏桌面遊戲

### 音樂節奏桌面遊戲範例網址

- [Music Tap](https://github.com/FlagTech/Music_Tap)


## 9-1 與 Agent 聊出專案所需文件

### 準備遊戲畫面草圖與音樂檔案

為了避免侵權疑慮，我們沒有提供遊戲畫面參考圖 `ref.png` 與遊戲音樂 MIDI 檔案。
MIDI 檔案可至以下相對安全的 MIDI 檔案網站下載：

- [早期流行樂、動漫與遊戲音樂](https://bitmidi.com/)
- [古典音樂](https://www.classicalarchives.com/midi.html)

> 下載網路資料時需謹慎小心並且搭配防毒軟體。此外，如果您的遊戲會作為公開使用或商業用途，則須確認所下載 MIDI 資料的使用範圍，以避免產生侵權問題。

### 與 AI 共同設計遊戲

- 文件生成的初始提示內容：

```md!
我想要建立一個名為 Music Tap 的音樂節奏桌面遊戲，稍後會需要請你協助撰寫本專案的 PRD.md、CLAUDE.md 與 spec.md。在正式撰寫這些文件之前，請你針對任何你需要釐清、但我尚未提及的內容主動向我提問，直到我們對整個專案達成完整共識後，再開始進行文件撰寫。

本遊戲預計使用 Python 的 pygame 套件進行開發，並以 uv 管理 Python 環境，選用的 Python 版本為 3.13，程式撰寫風格需遵循 PEP8 規範。

專案資料夾中有一張名為 ref.png 的參考圖，需提供給 Agent 作為遊戲畫面的設計依據；另外還有一個名為 midi 的資料夾，其中包含多個 MIDI 檔案，需作為遊戲的背景音樂並支援輪替播放。

關於 MIDI 檔案的 Python 解析套件，請你協助提供建議並分析其優缺點。目前我已知的套件有 mido、pretty-midi 與 music21。而專案中 midi 資料集的音樂檔並非單音旋律，內容包含不同樂器、鼓組，且多為和弦結構，音樂中不包含人聲。

遊戲介面必須使用繁體中文顯示，且不得出現亂碼問題。操作方式為 Enter 開始遊戲、R 切換至下一首歌曲並重新開始、Esc 離開遊戲。遊戲主要按鍵使用 A S D F 與 H J K L 作為操作鍵，對應到遊戲畫面中的敲擊位置，同時對應雙手除大拇指以外的八根手指。

我希望整體遊戲難度不要過高，也就是按鍵輸入頻率不宜過密，須保留玩家足夠的反應時間；同一時間點最多僅允許按下四個按鍵，且所有按鍵判定都必須嚴格對準節奏。

計分機制與得分判斷原則將由你負責設計，但在正式納入系統規格之前，必須先向我完整說明並取得我的同意。
```

- 文件生成前的最後補充內容：

```md!
最後，需幫我補上

1. Python 環境建置：使用 uv 管理 Python 環境
- 以 uv init 初始專案使用 Python 3.13
- 套件均以 uv add 加入專案
- Python 程式檔均以 uv run 執行

2. Windows 環境注意事項：Windows 中 Python 預設會以系統的編碼輸出文字，在繁體中文版會是 Big5，也就是 CP950 編碼，請特別留意\

3. 執行 Shell 或 CMD 指令前必須先描述此指令的用途，也就是執行指令後會發生什麼事

好了，可以幫我根據上述內容寫 PRD.md、CLAUDE.md、spec.md，並由你判斷什麼內容要放在哪個檔案
```

- 文件修改提示內容：

```md!
我對 @CLAUDE.md 進行了部分修改，請不要修改 @CLAUDE.md 的內容，並將其作為唯一真相來源來修改 @PRD.md 和 @spec.md，讓所有檔案內容維持一致
```


## 9-2 用規格書.md 實作 MVP 版本

### Plan 模式實作專案

- 實作遊戲專案的提示內容：

```md!
請根據 @PRD.md 和 @spec.md 來幫我實作這個遊戲專案的 MVP 版本，先求遊戲基本功能與 UI 皆正確

在實作整個專案的過程中，請謹記：需要執行 Shell 或 CMD 指令前必須先向我描述此指令的用途，也就是需說明執行指令後會發生什麼事
```
