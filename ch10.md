# 第 10 章 Cursor CLI 與常用指令

### 音樂節奏桌面遊戲範例網址

- [Music Tap](https://github.com/FlagTech/Music_Tap)


## 10-1 在 Windows（WSL）/ macOS / Linux 使用 Cursor CLI

### 讓 Cursor 幫你安裝 WSL

#### 安裝 WSL 元件

- 檢察系統是否已存在 WSL 元件：

> 查看 WSL 版本

```md
wsl -l -v
```

- WSL 元件安裝指令：

> 使用預設值安裝 WSL 元件

```md
wsl --install
```

- 安裝 Linux 發行版 (預設安裝 Ubuntu)：

> 使用預設值安裝 WSL 發行版

```md
wsl --install
```

- 更新套件資料庫內資訊並升級已安裝的軟體：

> 更新並升級系統套件

```md
sudo apt update && sudo apt upgrade -y
```

#### 安裝本章需使用的工具

- 安裝 uv 工具：

> 使用原生方式安裝 uv

```md
curl -LsSf https://astral.sh/uv/install.sh | sh
source $HOME/.local/bin/env
```

- 安裝 TiMidity++ 音源合成器：

> 安裝 timidity

```md
sudo apt update && sudo apt install -y timidity
```

- 安裝 Chromium 瀏覽器：

> 安裝 chromium

```md
sudo apt update && sudo apt install -y chromium-browser
```

- 安裝美化 json 格式的 jq：

> 安裝 jq

```md
sudo apt update && sudo apt install -y jq
```

### 安裝 Cursor CLI

安裝指令：

```md
curl https://cursor.com/install -fsS | bash
```

把 ~/.local/bin 路徑加入 PATH 環境變數：

- WSL / Linux：

```md
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
```

- macOS：

```md
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

查看 Cursor CLI 版本資訊：

```md
cursor-agent --version
```

將 Cursor CLI 更新到最新版本：

```md
cursor-agent update
```

### 在 Cursor CLI 使用 Agent

啟動 Cursor CLI 互動模式：

```md
cursor-agent
```


## 10-2 用 Cursor CLI 互動模式優化音樂遊戲

### Plan 模式替音樂遊戲新增功能

- 優化遊戲的提示內容：

```md!
請在遊戲中加入曲目選單與難度分級的功能
需注意：此音樂遊戲也會在 Windows 與 macOS 系統中執行
```

## 10-4 Cursor CLI 無頭模式

### 無頭模式相關參數

`--print` 會啟用無頭模式：

- 預設輸出純文字

```md!
cursor-agent -p "嗨嗨"
```

- 輸出 json 格式

```md!
cursor-agent -p --output-format json "嗨嗨" | jq
```

- 串流輸出 json 格式

```md!
cursor-agent -p --output-format stream-json \
--model sonnet-4.5-thinking \
--resume [chatId] \
"我剛剛說了什麼" | jq
```

- 串流輸出 json 格式的回應文字

```md!
cursor-agent -p --output-format stream-json \
--stream-partial-output \
--model sonnet-4.5-thinking \
"嗨嗨" | jq
```

- 僅提取「"type": "assistant"」的回應內容

```md!
cursor-agent -p --output-format stream-json \
--stream-partial-output \
"嗨嗨" | jq '.message.content[0].text'
```

### 讓 Agent 上網搜尋資料

建立空白對話：

```md
cursor-agent create chat
```

強制啟用 Cursor	內建的	browser	工具：

```md!
cursor-agent -p --force --browser \
--resume [chatId] \ 
"@browser 摘要 https://www.pygame.org/news"
```

### 讓 Agent 分析檔案用途並協助整理

分析資料夾內容並給予建議：

```md!
cursor-agent -p "幫我分析專案中每個檔案的用途，並建議哪些檔案可以刪除"
```

## 10-5 用 Cursor 開啟 WSL 中的專案

在 WSL 的使用者目錄（~）中建立專案資料夾「testwsl」：

```md!
cd ~
mkdir testwsl
```

### 從 WSL 直接開啟 Cursor

以「testwsl」專案資料夾為例，從 WSL 啟動 Cursor 的指令：

```md!
cursor ~/testwsl
```
